#  HalalaH EMV Code Bill Status Version 2

Use this web service to check your EMV Code Bill payment status.


## Access Token Web Service
Use this web service to generate an access token to be able to use the bill status web service

###### URL
```
 https://login.halalah.sa/connect/token
```
###### Method
```
 POST
```
###### Headers
```
 “ContentType” : “application/x-www-form-urlencoded”
```
###### Request body type
```
x-www-form-urlencoded
```
###### Request body
```
 "grant_type": “client_credentials"
 “client_id": Provided By HalalaH
 "client_secret": Provided By HalalaH
 “scope": “scope_ext_order_gw_api“
```
###### Response body
```
{
 "access_token": “accessToken String”,
 "expires_in": TTL milliseconds,
 "token_type": “Bearer"
}
```

<br />
<br />

## Bill Status Web Service
Use this web service to check the bill payment status

###### URL
> Url Parameters 
> - `Terminal_ID` Which the EMV Code was generated from
> - `Reference Number` Contained in the EMV Code 
```
https://apigw.halalah.sa/Orders/v2/Order/{Terminal_ID}/{Reference_Number}
```
###### Method
```
GET
```
###### Headers
```
 "Content-Type": "application/json" 
 "Authorization": “Bearer {access_token}” Generated by the AccessToken web service
```
###### Request body type
```
- NA
```
###### Request body
```
- NA
```
###### Response body
There are two cases for the reponse:  
- ###### Not Paid `HTTP Status Code == 204 - No Content`
```
Empty Body
```
- ###### Paid `HTTP Status Code == 200 - OK`
```
{
 "status": 0,
 "message": "Ok", 
 "data": {
  "orderID": “Reference Number String”,
  "amount": Float,
  "billNumber": “Bill Number String",
  "trxRef": “Transaction Reference in HalalaH String",
  "trxDate": "2019-01-30T12:02:06Z",
  "isPaid": true 
 }
}
```
